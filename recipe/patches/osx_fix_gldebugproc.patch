From 01e6dd9c77ea4df0a46beebcd3903fb1ba07b9df Mon Sep 17 00:00:00 2001
From: yann_dm <yann.montmarin@gmail.com>
Date: Wed, 12 Oct 2022 13:57:49 +0200
Subject: [PATCH] OSX: need GLDEBUGPROC to be define before any other Qt import

---
 include/gepetto/gui/action-search-bar.hh | 3 ++-
 include/gepetto/gui/bodytreewidget.hh    | 3 ++-
 include/gepetto/gui/fwd.hh               | 7 ++++---
 include/gepetto/gui/node-action.hh       | 3 ++-
 include/gepetto/gui/osgwidget.hh         | 2 +-
 include/gepetto/gui/pick-handler.hh      | 3 ++-
 include/gepetto/gui/plugin-interface.hh  | 3 +++
 include/gepetto/gui/pythonwidget.hh      | 2 +-
 include/gepetto/gui/safeapplication.hh   | 3 ++-
 include/gepetto/gui/selection-event.hh   | 2 +-
 include/gepetto/gui/selection-handler.hh | 3 ++-
 include/gepetto/gui/tree-item.hh         | 3 ++-
 include/gepetto/gui/windows-manager.hh   | 2 +-
 13 files changed, 25 insertions(+), 14 deletions(-)

diff --git include/gepetto/gui/action-search-bar.hh include/gepetto/gui/action-search-bar.hh
index 23a6ccc..a145eee 100644
--- include/gepetto/gui/action-search-bar.hh
+++ include/gepetto/gui/action-search-bar.hh
@@ -17,11 +17,12 @@
 #ifndef GEPETTO_GUI_ACTION_SEARCH_BAR_HH
 #define GEPETTO_GUI_ACTION_SEARCH_BAR_HH
 
+#include <gepetto/gui/fwd.hh>
+
 #include <QLineEdit>
 #include <QMap>
 #include <QString>
 #include <QStringListModel>
-#include <gepetto/gui/fwd.hh>
 
 namespace gepetto {
 namespace gui {
diff --git include/gepetto/gui/bodytreewidget.hh include/gepetto/gui/bodytreewidget.hh
index 7d45ea9..208f170 100644
--- include/gepetto/gui/bodytreewidget.hh
+++ include/gepetto/gui/bodytreewidget.hh
@@ -17,12 +17,13 @@
 #ifndef GEPETTO_GUI_BODYTREEWIDGET_HH
 #define GEPETTO_GUI_BODYTREEWIDGET_HH
 
+#include <gepetto/gui/fwd.hh>
+
 #include <QStandardItemModel>
 #include <QToolBox>
 #include <QTreeView>
 #include <QVector3D>
 #include <QWidget>
-#include <gepetto/gui/fwd.hh>
 
 namespace gepetto {
 namespace gui {
diff --git include/gepetto/gui/fwd.hh include/gepetto/gui/fwd.hh
index 2b407f6..0e0f517 100644
--- include/gepetto/gui/fwd.hh
+++ include/gepetto/gui/fwd.hh
@@ -17,8 +17,9 @@
 #ifndef GEPETTO_GUI_FWD_HH
 #define GEPETTO_GUI_FWD_HH
 
-#include <QtGlobal>
 #include <vector>
+
+#include <QtGlobal>
 #if QT_VERSION >= 0x050000
 #include <QtGui/qopengl.h>
 #ifdef __APPLE__
@@ -30,10 +31,10 @@ typedef void(APIENTRY *GLDEBUGPROC)(GLenum source, GLenum type, GLuint id,
                                     const GLvoid *userParam);
 #endif
 #endif
+#include <QtGui>
+
 #include <gepetto/viewer/fwd.h>
 #include <gepetto/viewer/macros.h>
-
-#include <QtGui>
 #include <gepetto/gui/config-dep.hh>
 
 namespace gepetto {
diff --git include/gepetto/gui/node-action.hh include/gepetto/gui/node-action.hh
index 547d68a..2be02ce 100644
--- include/gepetto/gui/node-action.hh
+++ include/gepetto/gui/node-action.hh
@@ -17,9 +17,10 @@
 #ifndef GEPETTO_GUI_NODE_ACTION_HH
 #define GEPETTO_GUI_NODE_ACTION_HH
 
-#include <QAction>
 #include <gepetto/gui/fwd.hh>
 
+#include <QAction>
+
 namespace gepetto {
 namespace gui {
 class NodeActionBase : public QAction {
diff --git include/gepetto/gui/osgwidget.hh include/gepetto/gui/osgwidget.hh
index cfb97d1..9975b2f 100644
--- include/gepetto/gui/osgwidget.hh
+++ include/gepetto/gui/osgwidget.hh
@@ -17,13 +17,13 @@
 #ifndef GEPETTO_GUI_OSGWIDGET_HH
 #define GEPETTO_GUI_OSGWIDGET_HH
 
+#include <gepetto/gui/fwd.hh>
 #include <gepetto/viewer/config-osg.h>
 
 #include <QLabel>
 #include <QString>
 #include <QThread>
 #include <QTimer>
-#include <gepetto/gui/fwd.hh>
 #include <osg/ref_ptr>
 #include <osgQt/GraphicsWindowQt>
 #include <osgViewer/ViewerBase>
diff --git include/gepetto/gui/pick-handler.hh include/gepetto/gui/pick-handler.hh
index a8344da..952804c 100644
--- include/gepetto/gui/pick-handler.hh
+++ include/gepetto/gui/pick-handler.hh
@@ -17,9 +17,10 @@
 #ifndef GEPETTO_GUI_PICK_HANDLER_HH
 #define GEPETTO_GUI_PICK_HANDLER_HH
 
+#include <gepetto/gui/fwd.hh>
+
 #include <QModelIndex>
 #include <QObject>
-#include <gepetto/gui/fwd.hh>
 #include <gepetto/gui/qt-osg-keyboard.hh>
 #include <osg/ref_ptr>
 #include <osgGA/GUIEventHandler>
diff --git include/gepetto/gui/plugin-interface.hh include/gepetto/gui/plugin-interface.hh
index f6b7fd3..af669a7 100644
--- include/gepetto/gui/plugin-interface.hh
+++ include/gepetto/gui/plugin-interface.hh
@@ -17,6 +17,9 @@
 #ifndef GEPETTO_GUI_PLUGININTERFACE_HH
 #define GEPETTO_GUI_PLUGININTERFACE_HH
 
+#include <gepetto/gui/fwd.hh>
+
+#include <QOpenGLContext>
 #include <QWidget>
 #include <QtGui>
 #include <gepetto/gui/dialog/dialogloadenvironment.hh>
diff --git include/gepetto/gui/pythonwidget.hh include/gepetto/gui/pythonwidget.hh
index 2a3dbf5..60e9332 100644
--- include/gepetto/gui/pythonwidget.hh
+++ include/gepetto/gui/pythonwidget.hh
@@ -17,8 +17,8 @@
 #ifndef GEPETTO_GUI_PYTHONWIDGET_HH
 #define GEPETTO_GUI_PYTHONWIDGET_HH
 
-#include <gepetto/gui/config-dep.hh>
 #include <gepetto/gui/fwd.hh>
+#include <gepetto/gui/config-dep.hh>
 
 #if !GEPETTO_GUI_HAS_PYTHONQT
 #error "gepetto-viewer was not compile with PythonQt dependency."
diff --git include/gepetto/gui/safeapplication.hh include/gepetto/gui/safeapplication.hh
index 3c766fb..d5c1eb0 100644
--- include/gepetto/gui/safeapplication.hh
+++ include/gepetto/gui/safeapplication.hh
@@ -19,9 +19,10 @@
 
 #include <assert.h>
 
-#include <QApplication>
 #include <gepetto/gui/fwd.hh>
 
+#include <QApplication>
+
 namespace gepetto {
 namespace gui {
 class SlotExceptionCatch {
diff --git include/gepetto/gui/selection-event.hh include/gepetto/gui/selection-event.hh
index dfea9b9..bfee964 100644
--- include/gepetto/gui/selection-event.hh
+++ include/gepetto/gui/selection-event.hh
@@ -17,13 +17,13 @@
 #ifndef GEPETTO_GUI_SELECTION_EVENT_HH
 #define GEPETTO_GUI_SELECTION_EVENT_HH
 
+#include <gepetto/gui/fwd.hh>
 #include <gepetto/viewer/node.h>
 
 #include <QAtomicInt>
 #include <QObject>
 #include <QString>
 #include <QVector3D>
-#include <gepetto/gui/fwd.hh>
 
 namespace gepetto {
 namespace gui {
diff --git include/gepetto/gui/selection-handler.hh include/gepetto/gui/selection-handler.hh
index 28eece2..8738720 100644
--- include/gepetto/gui/selection-handler.hh
+++ include/gepetto/gui/selection-handler.hh
@@ -17,11 +17,12 @@
 #ifndef GEPETTO_GUI_SELECTION_HANDLER_H__
 #define GEPETTO_GUI_SELECTION_HANDLER_H__
 
+#include <gepetto/gui/fwd.hh>
+
 #include <QComboBox>
 #include <QKeyEvent>
 #include <QVector3D>
 #include <QWidget>
-#include <gepetto/gui/fwd.hh>
 
 namespace gepetto {
 namespace gui {
diff --git include/gepetto/gui/tree-item.hh include/gepetto/gui/tree-item.hh
index 2eb1123..3341d01 100644
--- include/gepetto/gui/tree-item.hh
+++ include/gepetto/gui/tree-item.hh
@@ -17,6 +17,8 @@
 #ifndef GEPETTO_GUI_TREEITEM_HH
 #define GEPETTO_GUI_TREEITEM_HH
 
+#include <gepetto/gui/fwd.hh>
+
 #include <QDoubleSpinBox>
 #include <QItemDelegate>
 #include <QMenu>
@@ -24,7 +26,6 @@
 #include <QSignalMapper>
 #include <QSlider>
 #include <QStandardItem>
-#include <gepetto/gui/fwd.hh>
 
 namespace gepetto {
 namespace gui {
diff --git include/gepetto/gui/windows-manager.hh include/gepetto/gui/windows-manager.hh
index 47b60c9..87857d1 100644
--- include/gepetto/gui/windows-manager.hh
+++ include/gepetto/gui/windows-manager.hh
@@ -17,12 +17,12 @@
 #ifndef GEPETTO_GUI_WINDOWSMANAGER_HH
 #define GEPETTO_GUI_WINDOWSMANAGER_HH
 
+#include <gepetto/gui/fwd.hh>
 #include <gepetto/viewer/windows-manager.h>
 
 #include <QColor>
 #include <QObject>
 #include <QVector3D>
-#include <gepetto/gui/fwd.hh>
 
 namespace gepetto {
 namespace gui {
-- 
2.25.1

